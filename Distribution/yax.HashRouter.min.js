!function(){"use strict";Y.config.set("HashRouter.defaultPath","/"),Y.config.set("HashRouter.before",Y.noop),Y.config.set("HashRouter.on",Y.noop),Y.config.set("HashRouter.notFound",Y.noop);var t,e=Y.config.getAll("HashRouter",!1,!0),n=window.location;t={routes:[],current:null,previous:null,config:function(n){var r;for(r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return t},history:{cache:!1,support:Y.hasOwn.call(window,"history")},array:function(t){return Y.G.slice.call(t,0)},go:function(e){return n.hash=e,t},back:function(e){return t.previous?(history.back(),t.previous=null):e&&(n.hash=e),t},proxy:function(t){var e,n=this;return e=function(){return t.apply(n,arguments)}},proxyAll:function(){var t,e=this.array(arguments);for(t=0;t<e.length;t++)this[e[t]]=this.proxy(this[e[t]])},add:function(t,e){var n,r;if(Y.isObject(t))for(n in t)t.hasOwnProperty(n)&&this.add(n,t[n]);else Y.isString(t)&&(t=t.replace(Y.G.regexList.escape,"\\$&").replace(Y.G.regexList.namedArgument,"([^/]*)").replace(Y.G.regexList.argumentSplat,"(.*?)"),r=new RegExp("^"+t+"$")),this.routes.push({Route:r,Function:e||function(){return!1}})},setup:function(t){return t&&t.history&&(this.history.cache=this.history.support&&t.history),this.history.cache?$(window).bind("popstate",this.change):$(window).bind("hashchange",this.change),this.proxyAll("change"),this.change()},unbind:function(){this.history?$(window).unbind("popstate",this.change):$(window).unbind("hashchange",this.change)},navigate:function(){var t,e=this.array(arguments),r=!1;Y.isBool(e[e.length-1])&&(r=e.pop()),t=e.join("/"),this.Path!==t&&(r||(this.Path=t),this.history.cache?history.cache.pushState({},document.title,this.getHost()+t):n.hash=t)},match:function(t,e,n){var r,o=e.exec(t);return o?(r=o.slice(1),n.apply(n,r),!0):!1},getPath:function(){return n.pathname},getHash:function(){return n.hash},getHost:function(){return(document.location+Y.empty).replace(this.getPath()+this.getHash(),"")},getFragment:function(){return this.getHash().replace(Y.G.regexList.hashStrip,"")},change:function(){var n,r,o,i,a=t.history.cache?t.getPath():t.getFragment(),s=t.getHash(),h=!1,u=t.current;if(a!==t.Path){for(t.Path=a,s||(s=e.defaultPath),u&&u!==t.previous&&(t.previous=u),t.current=s,n=0,r=t.routes.length;r>n&&!h;n++)if(o=t.routes[n],t.match(a,o.Route,o.Function))return;for(n=0,r=t.routes.length;r>n&&!h;n++)o=t.routes[n],Y.isString(a)?a.toLowerCase()===s.toLowerCase().slice(1)&&(e.before.call(t,a),o.Function.call(t),e.on.call(t,a),h=!0):(i=s.match(a),i&&(e.before.call(t,a,i),o.Function.apply(t,i),e.on.call(t,a,i),h=!0));return h||e.notFound.call(t),t}}},$.hashRouter=window.hashRouter=t}();