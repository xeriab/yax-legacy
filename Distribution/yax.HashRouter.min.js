!function(){"use strict";Y.config.set("yax.plugins.hashrouter.defaultPath","/"),Y.config.set("yax.plugins.hashrouter.before",Y.noop),Y.config.set("yax.plugins.hashrouter.on",Y.noop),Y.config.set("yax.plugins.hashrouter.notFound",Y.noop);var t,n=Y.config.getAll("yax.plugins.hashrouter",!1,!0),e=window.location;t={routes:[],current:null,previous:null,config:function(e){var r;for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return t},history:{cache:!1,support:Y.hasOwn.call(window,"history")},array:function(t){return Y.G.slice.call(t,0)},go:function(n){return e.hash=n,t},back:function(n){return t.previous?(history.back(),t.previous=null):n&&(e.hash=n),t},proxy:function(t){var n,e=this;return n=function(){return t.apply(e,arguments)}},proxyAll:function(){var t,n=this.array(arguments);for(t=0;t<n.length;t++)this[n[t]]=this.proxy(this[n[t]])},add:function(t,n){var e,r;if(Y.isObject(t))for(e in t)t.hasOwnProperty(e)&&this.add(e,t[e]);else Y.isString(t)&&(t=t.replace(Y.G.regexList.escape,"\\$&").replace(Y.G.regexList.namedArgument,"([^/]*)").replace(Y.G.regexList.argumentSplat,"(.*?)"),r=new RegExp("^"+t+"$")),this.routes.push({Route:r,Function:n||function(){return!1}})},setup:function(t){return t&&t.history&&(this.history.cache=this.history.support&&t.history),this.history.cache?$(window).bind("popstate",this.change):$(window).bind("hashchange",this.change),this.proxyAll("change"),this.change()},unbind:function(){this.history?$(window).unbind("popstate",this.change):$(window).unbind("hashchange",this.change)},navigate:function(){var t,n=this.array(arguments),r=!1;Y.isBool(n[n.length-1])&&(r=n.pop()),t=n.join("/"),this.Path!==t&&(r||(this.Path=t),this.history.cache?history.cache.pushState({},document.title,this.getHost()+t):e.hash=t)},match:function(t,n,e){var r,o=n.exec(t);return o?(r=o.slice(1),e.apply(e,r),!0):!1},getPath:function(){return e.pathname},getHash:function(){return e.hash},getHost:function(){return(document.location+Y.empty).replace(this.getPath()+this.getHash(),"")},getFragment:function(){return this.getHash().replace(Y.G.regexList.hashStrip,"")},change:function(){var e,r,o,i,a=t.history.cache?t.getPath():t.getFragment(),s=t.getHash(),h=!1,u=t.current;if(a!==t.Path){for(t.Path=a,s||(s=n.defaultPath),u&&u!==t.previous&&(t.previous=u),t.current=s,e=0,r=t.routes.length;r>e&&!h;e++)if(o=t.routes[e],t.match(a,o.Route,o.Function))return;for(e=0,r=t.routes.length;r>e&&!h;e++)o=t.routes[e],Y.isString(a)?a.toLowerCase()===s.toLowerCase().slice(1)&&(n.before.call(t,a),o.Function.call(t),n.on.call(t,a),h=!0):(i=s.match(a),i&&(n.before.call(t,a,i),o.Function.apply(t,i),n.on.call(t,a,i),h=!0));return h||n.notFound.call(t),t}}},$.hashRouter=window.hashRouter=t}();